# 抖音视频解析

> [!IMPORTANT] 重要
> H&G Admin V3 是一次重大版本更新，引入了多项全新功能和系统优化。本版本专注于提升管理员体验、增强服务器管理能力，并提供更强大的开发者工具支持。
>

---
# H&G Admin V3 版本更新文档

## 版本概述



---

## 新增功能

### 1. 员工权限管理系统

V3 版本引入了全新的员工权限管理系统，允许服务器管理员精细化控制每个员工的操作权限。

#### 功能特点

- **权限组管理**: 支持创建多个权限组（如：管理员、协管、客服等），每个权限组可配置不同的权限集合
- **细粒度权限控制**: 超过 50 项独立权限可供配置，涵盖玩家管理、服务器管理、开发者工具等各个方面
- **实时权限同步**: 权限修改后立即生效，无需重启服务器
- **权限继承**: 支持权限组之间的继承关系，简化配置流程

#### 权限分类

| 分类 | 权限项示例 |
|------|-----------|
| 玩家管理 | 踢出玩家、封禁玩家、传送玩家、修改玩家数据 |
| 服务器管理 | 资源管理、服务器公告、天气控制 |
| 开发者工具 | 代码编辑器访问、控制台访问、3D地图访问 |
| 封禁系统 | 本地封禁、联合封禁、解封操作 |

#### 超级管理员配置

在 `config.lua` 中配置超级管理员，超级管理员拥有所有权限且无法被限制：

```lua
Config.SuperAdmins = {
    "license:你的license标识符",
    "discord:你的Discord用户ID",
    "steam:你的Steam标识符",
}
```

配置说明：
- `license:` - FiveM 许可证标识符（推荐使用）
- `discord:` - Discord 用户 ID（18位数字）
- `steam:` - Steam Hex 标识符

---

### 2. 代码编辑器 (VS Code 核心)

V3 版本集成了基于 Monaco Editor（VS Code 核心编辑器组件）的在线代码编辑器，让开发者可以直接在游戏内或 Web 管理面板中编辑服务器脚本。

#### 功能特点

- **多语言语法高亮**: 支持 Lua、JavaScript、TypeScript、JSON、HTML、CSS、Markdown 等多种语言
- **智能代码补全**: 内置 FiveM/CFX 原生函数自动补全，包括客户端和服务端 API
- **实时文件管理**: 
  - 浏览服务器资源文件夹结构
  - 创建、编辑、重命名、删除文件和文件夹
  - 支持文件搜索功能
- **代码搜索与替换**: 支持 Ctrl+F 搜索和 Ctrl+H 替换功能，与 VS Code 操作一致
- **主题切换**: 支持亮色/暗色主题切换
- **文档集成**: 内置 NativeDB 文档浏览器，方便查阅原生函数

#### 自动补全支持

代码编辑器内置了丰富的 FiveM 开发自动补全：

| 类别 | 示例 |
|------|------|
| 客户端原生函数 | GetPlayerPed, GetEntityCoords, CreateVehicle |
| 服务端原生函数 | GetPlayerIdentifiers, DropPlayer, GetPlayers |
| ESX 框架函数 | ESX.GetPlayerFromId, ESX.RegisterServerCallback |
| QBCore 框架函数 | QBCore.Functions.GetPlayer, QBCore.Functions.CreateCallback |
| ox_lib 函数 | lib.callback, lib.notify, lib.progressBar |
| MySQL 函数 | MySQL.query, MySQL.insert, MySQL.update |

#### 使用方式

1. 在管理员面板中进入「开发者工具」页面
2. 点击「代码编辑器」选项
3. 左侧文件树中选择要编辑的资源和文件
4. 编辑完成后按 Ctrl+S 保存

#### 注意事项

- 代码编辑器需要相应的员工权限才能访问
- 修改服务器核心脚本前请做好备份
- 部分修改可能需要重启相关资源才能生效

---

### 3. 3D 实时地图

V3 版本新增了 3D 实时地图功能，提供更直观的服务器玩家位置监控。

#### 功能特点

- **3D 地形渲染**: 基于 Los Santos 真实地形数据的 3D 地图显示
- **实时玩家标记**: 
  - 显示所有在线玩家的实时位置
  - 玩家标记包含玩家 ID 和名称
  - 不同类型玩家使用不同颜色标记（普通玩家、管理员、VIP等）
- **交互操作**:
  - 点击玩家标记可快速传送到该玩家位置
  - 支持地图缩放和旋转
  - 支持切换 2D/3D 视图模式
- **位置信息**: 鼠标悬停显示详细坐标信息
- **刷新机制**: 自动定时刷新玩家位置数据

#### 使用场景

- 监控服务器玩家分布情况
- 快速定位特定玩家
- 追踪可疑玩家行为
- 服务器活动管理

---

### 4. 服务器控制台

V3 版本新增了 Web 端服务器控制台功能。

#### 功能特点

- **远程命令执行**: 通过 Web 管理面板直接执行服务器控制台命令
- **实时日志查看**: 查看服务器实时输出日志
- **命令历史**: 保存命令执行历史，方便重复执行
- **权限控制**: 可配置哪些权限组可以访问控制台功能

---

### 5. 本地封禁系统

V3 版本新增了独立的本地封禁系统，与联合封禁系统并行运作。

#### 功能特点

- **灵活的封禁时长**: 支持分钟、小时、天、月、年以及永久封禁
- **封禁原因记录**: 详细记录封禁原因和操作管理员
- **进服拦截**: 被封禁玩家在连接时会被自动拦截并显示封禁信息
- **封禁列表管理**: 在管理面板中查看和管理所有本地封禁记录
- **解封功能**: 支持提前解除封禁

#### 与联合封禁的区别

| 特性 | 本地封禁 | 联合封禁 |
|------|----------|----------|
| 作用范围 | 仅当前服务器 | 多服务器共享 |
| 数据存储 | 本地数据库 | 云端 API |
| 适用场景 | 服务器内部违规 | 严重违规/跨服封禁 |

---

## 性能优化

V3 版本对资源占用进行了大幅优化：

- 优化客户端循环检测频率，减少 CPU 占用
- 实现条件性功能激活，未使用的功能不消耗资源
- 优化消息队列处理机制
- 减少不必要的网络通信

---

## 配置要求

### 服务端依赖

- oxmysql（必需）
- ox_lib（推荐）
- es_extended 或 qb-core（框架支持）

### 数据库

V3 版本会自动创建以下数据库表：

- `hgadmin_staff_permissions` - 员工权限数据
- `hgadmin_permission_groups` - 权限组配置
- `hgadmin_local_bans` - 本地封禁记录

---

## 更新日志

### V3.4.0

- 新增：员工权限管理系统
- 新增：VS Code 核心代码编辑器
- 新增：3D 实时地图
- 新增：服务器控制台
- 新增：本地封禁系统
- 新增：AI 编程助手集成
- 优化：大幅降低资源占用
- 优化：改进 Web 管理面板响应速度
- 修复：多项已知问题

---

## 技术支持

如有问题或建议，请通过以下方式联系：

- 售后支持群
- qq 群 863407368 
- qq作者 2065345911

---

文档版本：V3.4.0  
最后更新：2026年1月

  :::
